<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive service schedule for KTM 790 Adventure R motorcycle with integrated service manual viewer">
    <title>KTM 790 Adventure R - Service Schedule</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background-color: #ff6600; /* KTM Orange */
            color: white;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 10;
        }

        .container {
            display: flex;
            flex: 1;
            overflow: hidden; /* Prevents double scrollbars */
        }

        /* Left Side: The Table */
        .table-panel {
            flex: 1;
            min-width: 300px; /* Responsive minimum width for mobile */
            overflow-y: auto;
            padding: 20px;
            background: white;
            border-right: 2px solid #ddd;
        }

        /* Right Side: The PDF Viewer */
        .pdf-panel {
            flex: 1.5;
            background: #555;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Table Styling */
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
            margin-bottom: 2rem;
        }

        th {
            background-color: #333;
            color: white;
            position: sticky;
            top: 0;
            padding: 10px;
            text-align: center;
            z-index: 5;
        }

        /* Fix first column (Service Item) width and alignment */
        th:first-child, td:first-child {
            text-align: left;
            min-width: 180px;
            font-weight: 600;
        }

        td {
            padding: 8px;
            border-bottom: 1px solid #eee;
            text-align: center;
        }

        tr:hover {
            background-color: #fff3e6;
        }

        /* Section Headers inside table */
        .section-header {
            background-color: #ddd;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.85rem;
            color: #444;
            text-align: left;
        }

        /* Checkmark styling */
        .check {
            color: #ff6600;
            font-weight: bold;
        }

        /* Link Styling */
        a.page-link {
            display: inline-block;
            padding: 2px 8px;
            background-color: #eee;
            color: #333;
            text-decoration: none;
            border-radius: 4px;
            transition: background 0.2s;
            font-weight: bold;
            font-size: 0.8rem;
        }

        a.page-link:hover {
            background-color: #ff6600;
            color: white;
            cursor: pointer;
        }

        a.page-link:focus {
            outline: 3px solid #ff6600;
            outline-offset: 2px;
        }

        .note {
            font-size: 0.8rem;
            color: #666;
            margin-top: 10px;
            font-style: italic;
        }

        .error-message {
            display: none;
            background-color: #fff3cd;
            border: 2px solid #ffc107;
            padding: 20px;
            margin: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .error-message.show {
            display: block;
        }

        .download-link {
            display: inline-block;
            margin-top: 15px;
            padding: 10px 20px;
            background-color: #ff6600;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
        }

        .download-link:hover {
            background-color: #cc5200;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            header h1 {
                font-size: 1.2rem;
                padding: 0.5rem 0;
            }
            .container {
                flex-direction: column;
            }
            .table-panel {
                flex: 0 0 55vh;
                max-height: 55vh;
                min-width: auto;
                padding: 10px;
            }
            .pdf-panel {
                flex: 0 0 45vh;
                height: 45vh;
            }
            table {
                font-size: 0.8rem;
            }
            th, td {
                padding: 6px 4px;
            }
            a.page-link {
                padding: 2px 6px;
                font-size: 0.7rem;
            }
        }
    </style>
</head>
<body>

<header>
    <h1>KTM 790 Adventure R - Service Schedule (0 - 105,000 km)</h1>
</header>

<div class="container">
    <div class="table-panel">
        <table role="table" aria-label="Motorcycle service schedule">
            <caption style="font-weight: bold; font-size: 1.1rem; margin-bottom: 10px; text-align: left;">Service Schedule by Mileage Interval</caption>
            <thead>
                <tr>
                    <th>Service Item</th>
                    <th>Page</th>
                    <th>1k</th>
                    <th>15k</th>
                    <th>30k</th>
                    <th>45k</th>
                    <th>60k</th>
                    <th>75k</th>
                    <th>90k</th>
                    <th>105k</th>
                </tr>
            </thead>
            <tbody>
                <tr class="section-header"><td colspan="10">Engine & Intake</td></tr>
                <tr>
                    <td>Change engine oil & filter</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=321" class="page-link" aria-label="View engine oil change instructions on page 321">321</a></td>
                    <td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td>
                </tr>
                <tr>
                    <td>Change air filter</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=315" class="page-link" aria-label="View air filter change instructions on page 315">315</a></td>
                    <td></td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td>
                </tr>
                <tr>
                    <td>Change spark plugs</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=318" class="page-link" aria-label="View spark plug change instructions on page 318">318</a></td>
                    <td></td><td></td><td class="check">â—</td><td></td><td class="check">â—</td><td></td><td class="check">â—</td><td></td>
                </tr>
                <tr>
                    <td>Check valve clearance</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=325" class="page-link" aria-label="View valve clearance check instructions on page 325">325</a></td>
                    <td></td><td></td><td class="check">â—</td><td></td><td class="check">â—</td><td></td><td class="check">â—</td><td></td>
                </tr>

                <tr class="section-header"><td colspan="10">Brakes</td></tr>
                <tr>
                    <td>Check front brake linings</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=251" class="page-link" aria-label="View front brake lining check instructions on page 251">251</a></td>
                    <td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td>
                </tr>
                <tr>
                    <td>Check rear brake linings</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=256" class="page-link" aria-label="View rear brake lining check instructions on page 256">256</a></td>
                    <td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td>
                </tr>
                <tr>
                    <td>Check brake discs</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=246" class="page-link" aria-label="View brake disc check instructions on page 246">246</a></td>
                    <td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td>
                </tr>
                <tr>
                    <td>Check brake fluid levels</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=247" class="page-link" aria-label="View brake fluid level check instructions on page 247">247</a></td>
                    <td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td>
                </tr>

                <tr class="section-header"><td colspan="10">Chassis & Controls</td></tr>
                <tr>
                    <td>Check chain & sprockets</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=199" class="page-link" aria-label="View chain and sprocket check instructions on page 199">199</a></td>
                    <td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td>
                </tr>
                <tr>
                    <td>Check chain tension</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=195" class="page-link" aria-label="View chain tension check instructions on page 195">195</a></td>
                    <td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td>
                </tr>
                <tr>
                    <td>Check tire condition</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=279" class="page-link" aria-label="View tire condition check instructions on page 279">279</a></td>
                    <td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td>
                </tr>
                <tr>
                    <td>Check tire pressure</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=281" class="page-link" aria-label="View tire pressure check instructions on page 281">281</a></td>
                    <td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td>
                </tr>
                <tr>
                    <td>Check spoke tension</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=283" class="page-link" aria-label="View spoke tension check instructions on page 283">283</a></td>
                    <td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td>
                </tr>
                <tr>
                    <td>Check clutch lever play</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=327" class="page-link" aria-label="View clutch lever play check instructions on page 327">327</a></td>
                    <td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td>
                </tr>
                 <tr>
                    <td>Clean fork dust boots</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=222" class="page-link" aria-label="View fork dust boot cleaning instructions on page 222">222</a></td>
                    <td></td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td>
                </tr>
                 <tr>
                    <td>Check headlight setting</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=305" class="page-link" aria-label="View headlight setting check instructions on page 305">305</a></td>
                    <td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td>
                </tr>

                <tr class="section-header"><td colspan="10">Electrical & Cooling</td></tr>
                <tr>
                    <td>Check coolant level</td>
                    <td><a href="KTM790_2020_ServiceManual.pdf#page=312" class="page-link" aria-label="View coolant level check instructions on page 312">312</a></td>
                    <td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td><td class="check">â—</td>
                </tr>
            </tbody>
        </table>
        <p class="note"><strong>Note:</strong> 1,000 km is the break-in service. Valve clearance checks are every 30,000 km. Annual service (15k) tasks should be performed every 12 months regardless of mileage.</p>
    </div>

    <div class="pdf-panel">
        <div class="error-message" id="error-message">
            <h3>âš ï¸ PDF Viewer Not Available</h3>
            <p>The PDF cannot be displayed in this browser or from a local file.</p>
            <p><strong>Options:</strong></p>
            <ul style="list-style: none; padding: 0;">
                <li>â€¢ Open this file through a local web server</li>
                <li>â€¢ Or download the PDF directly below:</li>
            </ul>
            <a href="KTM790_2020_ServiceManual.pdf" download class="download-link" aria-label="Download KTM 790 Service Manual PDF">ğŸ“¥ Download Service Manual</a>
        </div>
        <iframe src="https://mozilla.github.io/pdf.js/web/viewer.html?file=https://cdn.jsdelivr.net/gh/roykeek/KTM-Service-Manual/KTM790_2020_ServiceManual.pdf" name="pdf-frame" id="pdf-frame" title="KTM 790 Adventure R Service Manual PDF Viewer" aria-label="Service manual PDF viewer">
            <p>Your browser does not support iframes. Please use the download link above to view the manual.</p>
        </iframe>
    </div>
</div>

<script>
    // Check if PDF loads successfully
    const iframe = document.getElementById('pdf-frame');
    const errorMessage = document.getElementById('error-message');
    
    // Detect if running from file:// protocol
    if (window.location.protocol === 'file:') {
        // Show warning for local file access
        setTimeout(() => {
            try {
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                if (!iframeDoc || iframeDoc.location.href === 'about:blank') {
                    errorMessage.classList.add('show');
                    iframe.style.display = 'none';
                }
            } catch (e) {
                // Cross-origin error - PDF likely not loading
                errorMessage.classList.add('show');
                iframe.style.display = 'none';
            }
        }, 1000);
    }
    
    // Add error handler for iframe
    iframe.addEventListener('error', () => {
        errorMessage.classList.add('show');
        iframe.style.display = 'none';
    });
    
    // Handle PDF page navigation clicks - navigate within iframe
    document.querySelectorAll('.page-link').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const href = this.getAttribute('href');
            console.log('Link clicked, href:', href);
            
            // Extract page number from href like "KTM790_2020_ServiceManual.pdf#page=321"
            const match = href.match(/#page=(\d+)/);
            const pageNum = match ? match[1] : null;
            console.log('Extracted page number:', pageNum);
            
            if (pageNum) {
                // Navigate to specific page in PDF viewer
                const pdfUrl = 'https://mozilla.github.io/pdf.js/web/viewer.html?file=https://cdn.jsdelivr.net/gh/roykeek/KTM-Service-Manual/KTM790_2020_ServiceManual.pdf%23page=' + pageNum;
                console.log('Setting iframe src to:', pdfUrl);
                iframe.src = pdfUrl;
            }
        });
    });
    
    // Add keyboard navigation support
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            document.activeElement.blur();
        }
    });
</script>

</body>
</html>
